
<?php header('Access-Control-Allow-Origin: *'); ?>
<!DOCTYPE HTML>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script>




            function getRoster(){
                $.ajax({
                    url: "https://orgtmetrics.herokuapp.com/roster",
                    type: 'GET',
                    dataType: 'JSON',
                    beforeSend: function(){
                        //this will be triggered before sending the ajax request
                        console.log('Sending AJAX Request...');
                    },
                    success: function(response,data){
                        //this will be triggered when the request successfully gets completed
                        //console.log(response.User);

                        dates = [new Date(2011,01,27), new Date(2012,2,29), new Date(2012,08,01)]

                        dataPoints = [];

                        data = [
                            {
                                type: "line",
                                dataPoints: dataPoints,
                                showInLegend: true
                            }
                        ];


                        numIIT = 0;

                        for (var i in response.User) {
                            if(response.User[i]['IIT MOU Signed'] != ""){
                                dataPoints.push({x: new Date(response.User[i]['IIT MOU Signed']), y: ++numIIT});
                            }
                        }


                        var chart = new CanvasJS.Chart("chartContainer", {
                            animationEnabled: true,
                            theme: "light2",
                            title:{
                                text: "Simple Line Chart"
                            },
                            axisY:{
                                includeZero: false
                            },
                            data: data
                        });



                        chart.render();
                    },
                    error: function(){
                        //this will be triggered when the request fails
                        console.log('Request Failed.');
                    }
                });
            }




            window.onload = function() {

                getRoster();
            };






        </script>

        <!--<script>
            window.onload = function () {

                data =  [{
                        type: "line",
                        dataPoints: [
                            { y: 450 },
                            { y: 414},
                            { y: 520, indexLabel: "highest",markerColor: "red", markerType: "triangle" },
                            { y: 460 },
                            { y: 450 },
                            { y: 500 },
                            { y: 480 },
                            { y: 480 },
                            { y: 410 , indexLabel: "lowest",markerColor: "DarkSlateGrey", markerType: "cross" },
                            { y: 500 },
                            { y: 480 },
                            { y: 510 }
                        ]},{
                        type: "line",
                        dataPoints:[
                            { y: 10 },
                            { y: 20},
                            { y: 10, indexLabel: "highest",markerColor: "red", markerType: "triangle" },
                            { y: 20 },
                            { y: 30 },
                            { y: 40 },
                            { y: 50 },
                            { y: 60 },
                            { y: 70 , indexLabel: "lowest",markerColor: "DarkSlateGrey", markerType: "cross" },
                            { y: 80 },
                            { y: 90 },
                            { y: 100 }
                        ]}

                    ];

                var chart = new CanvasJS.Chart("chartContainer", {
                	animationEnabled: true,
                	theme: "light2",
                	title:{
                		text: "Simple Line Chart"
                	},
                	axisY:{
                		includeZero: false
                	},
                	data: data
                });
                chart.render();
            }

            function PopulateAll(){
                $.ajax({
                url: "https://orgtmetrics.herokuapp.com/roster",
                type: 'GET',
                dataType: 'JSON',
                beforeSend: function(){
                //this will be triggered before sending the ajax request
                console.log('Sending AJAX Request...');
                },
                success: function(response){
                //this will be triggered when the request successfully gets completed
                console.log(response);
                },
                error: function(){
                //this will be triggered when the request fails
                console.log('Request Failed.');
                }
                });
            }

            PopulateAll();
        -->




        </script>
    </head>
    <body>
        <div id="chartContainer" style="height: 300px; width: 100%;"></div>
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    </body>
</html>
